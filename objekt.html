---
layout: default
title: Fastighet
---

<!--
- skriv ut all data i en JS struktur
- läs in parameter från URL
- leta upp rätt data o skriv ut på sidan

  //{{forloop.index}}
  // {{site.data.geocodes[0]}}
  // {{site.data.geocodes[0].lat}}
  // "{{site.data.geocodes[forloop.index] }}" 
  // "{{site.data.geocodes[forloop.index].lat }}" 

-->

<script>
 var items = [];
 var z;
 
 {% for obj in site.data.objects_by_date %}
  
   z = [ "{{ obj.title }}", "{{obj.url}}"
   , "{{site.data.geocodes[forloop.index].lat }}", "{{site.data.geocodes[forloop.index].lng }}" 
   , "{{ obj.imgurl }}"
   ]
   items.push(z);
 {% endfor %}


var i = window.location.search.replace( "?", "" );
//alert("found idx=" + i);
//alert("title=" + items[i][0] + " == " + items[i][2]);


</script>

<div style="width: 100%; display: table;">
    <div style="display: table-row">

		<div id="swe_map_canvas" style="width: 100px;height: 200px;background-color: #CCC; display: table-cell;"></div>
		<div id="reg_map_canvas" style="width: 200px;height: 200px;background-color: #CCC; display: table-cell;"></div>
		<div id="loc_map_canvas" style="width: 200px;height: 200px;background-color: #CCC; display: table-cell;"></div>
		<div id="street_map_canvas" style="width: 200px;height: 200px;background-color: #CCC; display: table-cell;"></div>

	</div>
</div>

<section id="mainContent" class="grid_10">
    <article>
        <div class="wrapper">
            <figure><img id="obj-img" width="161" height="132"></figure>
            <h3><a id="obj-url">bla</a></h3>
            <p>
            Diffvärde: {{fynd.valuediff}}  <br/>
            Pris: {{fynd.marketvalue }} <br/>
            Taxeringsvärde: {{fynd.taxvalue}} <br/>
                       </p>
            
        </div>
    </article>
</section>


<!--
<section id="mainContent" class="grid_10">
    <article>
        <h2>Fastigheter ordnade efter fyndpotential</h2>
        <div class="wrapper">
            <p>
            Här listas alla fastigheter baserat på den absoluta skillnaden mellan marknadsvärde och taxeringsvärde. Desto lägre marknadsvärde jämfört med taxeringsvärdet - desto större fyndpotential!
            
            Här har vi gjort grovjobbet åt dig. Du kan börja leta efter din drömfastighet
            bland de som troligen har det bästa priset.
            </p>
            
        </div>
    </article>


  {% for fynd in site.data.objects_by_date %}
    <article>
        <div class="wrapper">
            <figure><img src="{{fynd.imgurl}}" alt="" width="161" height="132"></figure>
            <h3><a href="{{fynd.url}}">{{ fynd.title }}</a></h3>
            <p>
            Diffvärde: {{fynd.valuediff}}  <br/>
            Pris: {{fynd.marketvalue }} <br/>
            Taxeringsvärde: {{fynd.taxvalue}} <br/>
                       </p>
            
        </div>
    </article>
    {% endfor %}

    
</section>
-->

<!--
maps: sverige, regionalt, lokalt, street view

-->

	<script>
      function initialize() {

        var mapCanvas = document.getElementById('swe_map_canvas');
        var myLatLng = new google.maps.LatLng(items[i][2], items[i][3]);
        var centerLatLng = new google.maps.LatLng(62,16);
        var myZoom = 3;
        var myTitle = items[i][0];		
		showMap(mapCanvas, myLatLng, centerLatLng, myZoom, myTitle)

        mapCanvas = document.getElementById('reg_map_canvas');
        myLatLng = new google.maps.LatLng(items[i][2], items[i][3]);
        centerLatLng = myLatLng; //new google.maps.LatLng(62,16);
        myZoom = 6;
        myTitle = items[i][0];		
		showMap(mapCanvas, myLatLng, centerLatLng, myZoom, myTitle)

        mapCanvas = document.getElementById('loc_map_canvas');
        myLatLng = new google.maps.LatLng(items[i][2], items[i][3]);
        centerLatLng = myLatLng; //new google.maps.LatLng(62,16);
        myZoom = 10;
        myTitle = items[i][0];		
		showMap(mapCanvas, myLatLng, centerLatLng, myZoom, myTitle)
   
        mapCanvas = document.getElementById('street_map_canvas');
        myLatLng = new google.maps.LatLng(items[i][2], items[i][3]);
        centerLatLng = myLatLng; //new google.maps.LatLng(62,16);
        myZoom = 15;
        myTitle = items[i][0];		
		showMap(mapCanvas, myLatLng, centerLatLng, myZoom, myTitle)
   
      }


	  function showMap(mapCanvas, myLatLng, centerLatLng, myZoom, myTitle){
        	//alert(mapCanvas + myZoom);
        	
	        var map_options = {
	          center: centerLatLng,
	          zoom: myZoom,
	          mapTypeId: google.maps.MapTypeId.ROADMAP,
	          disableDefaultUI : true,
	          draggable: true,
	          disableDoubleClickZoom: true,
	          mapTypeControl: false,
	          panControl: false,
	          rotateControl: false,
	          scaleControl: false,
	          scrollwheel: false
	        }        
	        var map = new google.maps.Map(mapCanvas, map_options)
			//map.setZoom(3);
		       
	        var marker = new google.maps.Marker({
	           position: myLatLng,
	           map: map,
	           title: myTitle
	        });
	  }
      
      
      
      
      $( document ).ready(function() {
      
      
	      initialize();
    	  //google.maps.event.addDomListener(window, 'load', initialize);
      
      	//alert("hej");	
		$("#obj-img").attr('src', items[i][4] ); // +'?'+Math.random() );
		$("#obj-url").attr('href', items[i][1] );
		$("#obj-url").get(0).lastChild.nodeValue =  items[i][0];
		
    });
      
    </script>
